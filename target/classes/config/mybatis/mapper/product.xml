<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product"><!-- 파일 마다 있는 SQL문들을 구분할수 있는 이름 -->

	<!-- 사용할 SQL문들을 정의하는 파일 -->

	<select id="selectList" resultType="product">
		select c.major_idx, c.middle_idx, c.small_idx , b.brand_name, p.* from product p, brand b, product_category c where b.idx = p.brand_idx and c.product_idx = p.idx
	</select>
	
	<select id="selectOne" resultType="product" parameterType="int">
		select c.major_idx, c.middle_idx, c.small_idx, p.* , b.brand_name
		from product p, brand b,  product_category c 
		where p.idx = #{idx} and c.product_idx = p.idx and b.idx = p.brand_idx
	</select>
	
	<insert id="insert" parameterType="product">
		insert into product values(#{idx},#{name},#{brand_idx},#{sale},#{price},#{status},#{info},#{delivery},#{picture})
	</insert>

	<update id="update" parameterType="product">
		update product set name=#{name},picture=#{picture},brand_idx=#{brand_idx},sale=#{sale},price=#{price},status=#{status},delivery=#{delivery},info=#{info} where idx=#{idx}
	</update>
	
	<delete id="delete" parameterType="int">
		delete product where idx=#{idx}
	</delete>
	
	<select id="getIdx" resultType="int">
		select product_seq.nextval from dual
	</select>

</mapper>
